<h3
    class="class-form__header"
    mat-dialog-title
>
    {{ formTitle | translate }}
</h3>
<mat-dialog-content>
    <form
        class="class-form"
        [formGroup]="classForm"
    >

        <div class="class-form__input-group">
            <mat-form-field appearance="fill">
                <mat-label>{{ 'CLASS.FORM.EDUCATION_FORMAT' | translate }}</mat-label>
                <mat-select formControlName="format">
                    <mat-option
                        *ngFor="let format of educationFormats"
                        [value]="format"
                    >
                        {{ 'EDUCATION_FORMAT.' + format | uppercase | translate }}
                    </mat-option>
                </mat-select>
                <mat-error>{{ errors['format'] }}</mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'CLASS.FORM.CLASS_TYPE' | translate }}</mat-label>
                <mat-select formControlName="type">
                    <mat-option
                        *ngFor="let type of classTypes"
                        [value]="type"
                    >
                        {{ 'CLASS_TYPE.' + type | uppercase | translate }}
                    </mat-option>
                </mat-select>
                <mat-error>{{ errors['type'] }}</mat-error>
            </mat-form-field>
        </div>

        <div class="class-form__input-group">
            <mat-form-field appearance="fill">
                <mat-label>{{ 'CLASS.FORM.WEEKDAY' | translate }}</mat-label>
                <mat-select formControlName="weekDay">
                    <mat-option
                        *ngFor="let weekDay of weekdays"
                        [value]="weekDay"
                    >
                        {{ 'WEEKDAY.' + weekDay | uppercase | translate }}
                    </mat-option>
                </mat-select>
                <mat-error>{{ errors['weekDay'] }}</mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'CLASS.FORM.WEEK_TYPE' | translate }}</mat-label>
                <mat-select formControlName="weekType">
                    <mat-option [value]="null">{{ 'COMMON.NONE' | translate }}</mat-option>
                    <mat-option
                        *ngFor="let weekType of weekTypes"
                        [value]="weekType"
                    >
                        {{ 'WEEK_TYPE.' + weekType | uppercase | translate }}
                    </mat-option>
                </mat-select>
                <mat-error>{{ errors['weekType'] }}</mat-error>
            </mat-form-field>
        </div>

        <div class="class-form__input-group">
            <mat-form-field appearance="fill">
                <mat-label>{{ 'CLASS.FORM.START_TIME' | translate }}</mat-label>
                <input matInput formControlName="startTime" type="time">
                <mat-error>{{ errors['startTime'] }}</mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'CLASS.FORM.END_TIME' | translate }}</mat-label>
                <input matInput formControlName="endTime" type="time">
                <mat-error>{{ errors['endTime'] }}</mat-error>
            </mat-form-field>
        </div>

        <mat-form-field appearance="fill">
            <mat-label>{{ 'CLASS.FORM.COURSE' | translate }}</mat-label>
            <mat-select formControlName="courseId">
                <mat-option
                    *ngFor="let course of courses$ | async"
                    [value]="course.id"
                >
                    {{ course.name }}
                </mat-option>
            </mat-select>
            <mat-error>{{ errors['courseId'] }}</mat-error>
        </mat-form-field>

        <app-select-list
            formControlName="teachers"
            [title]="'CLASS.FORM.TEACHER' | translate"
            [items]="teachers$"
            [filter]="filterTeachers"
            [displayWith]="displayTeacher"
            [error]="errors['teachers']"
        ></app-select-list>

        <app-select-list
            formControlName="audiences"
            [title]="'CLASS.FORM.AUDIENCE' | translate"
            [items]="audiences$"
            [filter]="filterAudiences"
            [displayWith]="displayAudience"
            [error]="errors['audiences']"
        ></app-select-list>

        <app-select-list
            formControlName="groups"
            [title]="'CLASS.FORM.GROUP' | translate"
            [items]="groups$"
            [filter]="filterGroups"
            [displayWith]="displayGroup"
            [error]="errors['groups']"
        ></app-select-list>

    </form>
</mat-dialog-content>

<mat-dialog-actions class="class-form__buttons">
    <ng-template [ngIf]="isCreateMode" [ngIfElse]="editButtons">
        <button
            mat-raised-button
            color="primary"
            (click)="submit()"
        >
            <mat-icon>add</mat-icon>
            {{ 'COMMON.CREATE' | translate }}
        </button>
    </ng-template>

    <ng-template #editButtons>
        <button
            mat-raised-button
            color="primary"
            [disabled]="saveDisabled"
            (click)="submit()"
        >
            <mat-icon>save</mat-icon>
            {{ 'COMMON.SAVE' | translate }}
        </button>

        <button
            mat-raised-button
            color="warn"
            (click)="delete()"
        >
            <mat-icon>delete</mat-icon>
            {{ 'COMMON.DELETE' | translate }}
        </button>
    </ng-template>
</mat-dialog-actions>
